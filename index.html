<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üå™ AstroAlert - Cyclone Prediction System</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="title">
                    <span class="cyclone-icon">üå™</span>
                    AstroAlert
                </h1>
                <p class="subtitle">Cyclone Prediction using AI & Vedic Astrology</p>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Upload Section -->
            <section class="upload-section">
                <div class="card">
                    <h2 class="section-title">
                        <span class="icon">üì°</span>
                        Satellite Image Analysis
                    </h2>
                    
                    <form id="analysisForm" class="analysis-form">
                        <!-- Image Upload -->
                        <div class="form-group">
                            <label for="imageUpload" class="form-label">Upload Satellite Image</label>
                            <div class="file-upload-wrapper">
                                <input type="file" id="imageUpload" name="image" accept="image/*" required>
                                <div class="file-upload-display">
                                    <span class="upload-icon">üìÅ</span>
                                    <span class="upload-text">Choose satellite image...</span>
                                </div>
                            </div>
                        </div>

                        <!-- Location Inputs -->
                        <div class="form-row">
                            <div class="form-group">
                                <label for="latitude" class="form-label">Latitude</label>
                                <input type="number" id="latitude" name="latitude" 
                                       step="0.0001" placeholder="19.0760" value="19.0760" required>
                            </div>
                            <div class="form-group">
                                <label for="longitude" class="form-label">Longitude</label>
                                <input type="number" id="longitude" name="longitude" 
                                       step="0.0001" placeholder="72.8777" value="72.8777" required>
                            </div>
                        </div>

                        <!-- DateTime Input -->
                        <div class="form-group">
                            <label for="datetime" class="form-label">Analysis Date & Time</label>
                            <input type="datetime-local" id="datetime" name="datetime" required>
                        </div>

                        <!-- Enhanced Analysis Toggle -->
                        <div class="form-group enhanced-toggle-group">
                            <div class="toggle-container">
                                <label class="toggle-label" for="enhancedToggle">
                                    <span class="toggle-text">
                                        <span class="toggle-icon">üß†</span>
                                        <span class="toggle-title">Enhanced Analysis</span>
                                        <span class="toggle-subtitle">Advanced ML meteorological analysis (95% accuracy)</span>
                                    </span>
                                    <div class="toggle-switch">
                                        <input type="checkbox" id="enhancedToggle" name="enhanced" class="toggle-input">
                                        <span class="toggle-slider"></span>
                                    </div>
                                </label>
                                <div class="enhanced-features" id="enhancedFeatures">
                                    <div class="feature-list">
                                        <div class="feature-item">üëÅÔ∏è Cyclone eye detection & clarity</div>
                                        <div class="feature-item">üìä Intensity classification (Cat 1-5)</div>
                                        <div class="feature-item">üåÄ Advanced meteorological features</div>
                                        <div class="feature-item">‚öñÔ∏è Enhanced risk scoring</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <button type="submit" class="submit-btn" id="analyzeBtn">
                            <span class="btn-icon">üîç</span>
                            <span class="btn-text">Analyze Cyclone Risk</span>
                        </button>
                    </form>
                </div>
            </section>

            <!-- Loading Section -->
            <section id="loadingSection" class="loading-section hidden">
                <div class="card">
                    <div class="loading-content">
                        <div class="spinner"></div>
                        <h3>Analyzing...</h3>
                        <p>Processing satellite imagery and calculating risk assessment</p>
                        <div class="loading-steps" id="loadingSteps">
                            <div class="step active">ü§ñ AI Detection</div>
                            <div class="step">üîÆ Astrology Analysis</div>
                            <div class="step">üìä Risk Assessment</div>
                        </div>
                        <div class="enhanced-loading-steps hidden" id="enhancedLoadingSteps">
                            <div class="step active">üéØ YOLO Detection</div>
                            <div class="step">üß† ML Analysis</div>
                            <div class="step">üëÅÔ∏è Eye Detection</div>
                            <div class="step">üìä Intensity Classification</div>
                            <div class="step">üîÆ Astrology</div>
                            <div class="step">‚öñÔ∏è Enhanced Risk</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Results Section -->
            <section id="resultsSection" class="results-section hidden">
                <div class="results-grid">
                    <!-- AI Detection Results -->
                    <div class="card result-card">
                        <h3 class="card-title">
                            <span class="icon">ü§ñ</span>
                            AI Detection
                        </h3>
                        <div id="aiResults" class="result-content">
                            <div class="metric">
                                <span class="metric-label">Cyclones Detected:</span>
                                <span id="cyclonesCount" class="metric-value">0</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Average Confidence:</span>
                                <span id="avgConfidence" class="metric-value">0%</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">AI Risk Score:</span>
                                <span id="aiRiskScore" class="metric-value">0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Astrology Results -->
                    <div class="card result-card">
                        <h3 class="card-title">
                            <span class="icon">üîÆ</span>
                            Vedic Astrology
                        </h3>
                        <div id="astrologyResults" class="result-content">
                            <div class="metric">
                                <span class="metric-label">VRS Score:</span>
                                <span id="vrsScore" class="metric-value">0/100</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Risk Level:</span>
                                <span id="astrologyRisk" class="metric-value risk-badge">LOW</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Risk Factors:</span>
                                <div id="riskFactors" class="risk-factors"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Enhanced Meteorological Results (shown only with enhanced analysis) -->
                    <div class="card result-card enhanced-results hidden" id="enhancedResultsCard">
                        <h3 class="card-title">
                            <span class="icon">üß†</span>
                            Enhanced Meteorological Analysis
                        </h3>
                        <div id="enhancedResults" class="result-content">
                            <div class="enhanced-metrics">
                                <div class="metric">
                                    <span class="metric-label">Intensity Classification:</span>
                                    <span id="intensityClassification" class="metric-value intensity-badge">Unknown</span>
                                </div>
                                <div class="metric">
                                    <span class="metric-label">ML Confidence:</span>
                                    <span id="mlConfidence" class="metric-value">0%</span>
                                </div>
                                <div class="metric">
                                    <span class="metric-label">Eye Detection:</span>
                                    <span id="eyeDetection" class="metric-value eye-badge">Not Detected</span>
                                </div>
                                <div class="metric">
                                    <span class="metric-label">Eye Clarity:</span>
                                    <span id="eyeClarity" class="metric-value">0%</span>
                                </div>
                                <div class="metric">
                                    <span class="metric-label">Organization:</span>
                                    <span id="structuralOrganization" class="metric-value">Unknown</span>
                                </div>
                                <div class="metric">
                                    <span class="metric-label">Development Stage:</span>
                                    <span id="developmentStage" class="metric-value">Unknown</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Combined Assessment -->
                    <div class="card result-card combined-assessment">
                        <h3 class="card-title">
                            <span class="icon">‚ö°</span>
                            <span id="combinedAssessmentTitle">Combined Assessment</span>
                        </h3>
                        <div id="combinedResults" class="result-content">
                            <div class="risk-score-display">
                                <div class="risk-circle">
                                    <span id="combinedRiskScore" class="risk-score">0</span>
                                    <span class="risk-score-label">/100</span>
                                </div>
                                <div id="finalRiskLevel" class="final-risk-level">LOW</div>
                            </div>
                            <div class="action-required">
                                <h4>Action Required:</h4>
                                <p id="actionText">Standard monitoring recommended</p>
                            </div>
                        </div>
                    </div>

                    <!-- Recommendations -->
                    <div class="card result-card recommendations-card">
                        <h3 class="card-title">
                            <span class="icon">üìã</span>
                            Recommendations
                        </h3>
                        <div id="recommendationsList" class="recommendations-list">
                            <!-- Recommendations will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Image Preview -->
                <div class="card image-preview-card">
                    <h3 class="card-title">
                        <span class="icon">üì∏</span>
                        Analyzed Image
                    </h3>
                    <div class="image-container">
                        <img id="previewImage" src="" alt="Analyzed satellite image" class="preview-image">
                    </div>
                </div>
            </section>

            <!-- Error Section -->
            <section id="errorSection" class="error-section hidden">
                <div class="card error-card">
                    <h3 class="card-title">
                        <span class="icon">‚ùå</span>
                        Analysis Error
                    </h3>
                    <div id="errorMessage" class="error-content">
                        <p>An error occurred during analysis. Please try again.</p>
                    </div>
                </div>
            </section>
        </main>

        <!-- Chatbot Section -->
        <div class="chatbot-container" id="chatbotContainer">
            <div class="chatbot-header" id="chatbotHeader">
                <div class="chatbot-info">
                    <span class="chatbot-icon">ü§ñ</span>
                    <div class="chatbot-details">
                        <span class="chatbot-name">CycloneBot</span>
                        <span class="chatbot-status" id="chatbotStatus">Initializing...</span>
                    </div>
                </div>
                <div class="chatbot-controls">
                    <button class="chatbot-control-btn" id="clearChatBtn" title="Clear conversation">
                        <span>üóëÔ∏è</span>
                    </button>
                    <button class="chatbot-control-btn" id="chatbotToggle" title="Toggle chatbot">
                        <span id="chatbotToggleIcon">üí¨</span>
                    </button>
                </div>
            </div>
            
            <div class="chatbot-content" id="chatbotContent">
                <div class="chat-messages" id="chatMessages">
                    <div class="welcome-message">
                        <div class="message bot-message">
                            <div class="message-content">
                                <p>üëã Hi! I'm CycloneBot, your AI assistant for cyclone analysis and safety.</p>
                                <p>Ask me about cyclones, weather patterns, emergency preparedness, or explain your analysis results!</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="suggested-questions" id="suggestedQuestions">
                    <div class="suggestions-label">üí° Suggested questions:</div>
                    <div class="suggestions-list" id="suggestionsList">
                        <!-- Suggestions will be populated here -->
                    </div>
                </div>
                
                <div class="chat-input-container">
                    <div class="chat-input-wrapper">
                        <input type="text" id="chatInput" class="chat-input" 
                               placeholder="Ask about cyclones, safety, or your analysis results..." 
                               maxlength="500">
                        <button id="sendChatBtn" class="send-chat-btn" title="Send message">
                            <span>üì§</span>
                        </button>
                    </div>
                    <div class="chat-input-info">
                        <span class="char-count" id="charCount">0/500</span>
                        <span class="chat-status" id="chatInputStatus">Ready</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <p>&copy; 2024 AstroAlert - Cyclone Prediction System | Combining AI & Vedic Astrology</p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>
